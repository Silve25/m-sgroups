<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
<<<<<<< HEAD
  <title>GF Store ‚Äî Accueil</title>
=======
  <title>GF Store ‚Äî Home</title>
>>>>>>> 51c22e3 (Mise √† jour des fichiers modifi√©s)
  <meta name="description" content="GF Store ‚Äî √âlectronique grand public premium. Livraison 24-48h, assistance 24/7, paiement s√©curis√©." />

  <style>
    :root{
      --bg:#f6f7fb; --card:#fff; --muted:#6b7280; --text:#0f172a; --accent:#0ea5a4; --danger:#ef4444;
      --glass: rgba(255,255,255,0.6);
      --shadow: 0 6px 18px rgba(15,23,42,0.06);
    }
    [data-theme="dark"]{
      --bg:#071026; --card:#071827; --muted:#9aa4b2; --text:#e6eef7; --accent:#34d399; --danger:#f87171;
      --glass: rgba(255,255,255,0.03);
      --shadow: 0 8px 24px rgba(0,0,0,0.6);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:linear-gradient(180deg,var(--bg), #e9eef6 120%); color:var(--text); -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Topbar */
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:18px 28px;backdrop-filter: blur(6px);background:var(--glass);box-shadow:var(--shadow);position:sticky;top:0;z-index:50}
    .brand{display:flex;gap:12px;align-items:center}
    .brand .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#06b6d4);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    .search{flex:1;margin:0 20px}
    .search input{width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);background:transparent;color:var(--text)}
    .actions{display:flex;gap:12px;align-items:center}
    .btn{padding:8px 12px;border-radius:8px;border:0;background:var(--card);box-shadow:var(--shadow);cursor:pointer}
    .icon-btn{display:inline-flex;align-items:center;gap:8px}

    /* Hero */
    .hero{display:grid;grid-template-columns:1fr 420px;gap:24px;padding:32px}
    .hero-card{background:var(--card);padding:22px;border-radius:14px;box-shadow:var(--shadow)}

    .promo{display:flex;gap:12px;align-items:center}
    .promo .badge{background:linear-gradient(90deg,#ff7a59,#ffb86b);color:#fff;padding:6px 10px;border-radius:8px;font-weight:700}

    /* Grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px;padding:20px}
    .product{background:var(--card);padding:12px;border-radius:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:12px}
    .product img{width:100%;height:160px;object-fit:contain;border-radius:8px;background:linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.01))}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .title{font-weight:600}
    .price{font-size:1.05rem;font-weight:700}
    .old{color:var(--muted);text-decoration:line-through;font-size:0.9rem;margin-left:8px}
    .badges{display:flex;gap:6px;flex-wrap:wrap}
    .badge-small{background:rgba(14,165,164,0.12);color:var(--accent);padding:6px;border-radius:8px;font-weight:600;font-size:0.8rem}

    .cta{display:flex;gap:8px}
    .add{flex:1;padding:10px;border-radius:10px;background:linear-gradient(90deg,var(--accent),#06b6d4);color:white;border:0;cursor:pointer}
    .info{padding:8px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);background:transparent;cursor:pointer}

    /* Mini cart */
    .minicart{position:fixed;right:18px;bottom:18px;background:var(--card);padding:12px;border-radius:12px;box-shadow:var(--shadow);width:320px;max-height:70vh;overflow:auto}
    .minicart h4{margin:0 0 10px 0}
    .cart-item{display:flex;gap:10px;align-items:center;padding:8px 0;border-bottom:1px dashed rgba(0,0,0,0.06)}
    .cart-item img{width:48px;height:48px;object-fit:contain}

    /* Footer */
    footer{padding:18px 28px;color:var(--muted);font-size:0.95rem}

    /* Responsive */
    @media (max-width:900px){.hero{grid-template-columns:1fr;}.topbar{flex-wrap:wrap}.search{order:3;width:100%;margin:10px 0}}
  </style>
</head>
<body>

  <header class="topbar">
    <div class="brand">
      <div class="logo">GF</div>
      <div>
        <div style="font-weight:800">GF Store</div>
        <div style="font-size:12px;color:var(--muted)">√âlectronique premium ‚Äî Livraison 24-48h</div>
      </div>
    </div>

    <div class="search">
      <input id="searchInput" placeholder="Rechercher : PC, PlayStation, AirPods..." />
    </div>

    <div class="actions">
      <button class="btn icon-btn" id="themeToggle" title="Basculer th√®me">üåô / ‚òÄÔ∏è</button>
      <button class="btn icon-btn" id="accountBtn">Compte</button>
      <button class="btn icon-btn" id="cartBtn">Panier (<span id="cartCount">0</span>)</button>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="hero-card">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <h1 style="margin:0">GF Store ‚Äî Boutique high-tech</h1>
            <p style="margin:6px 0;color:var(--muted)">Produits premium. Assistance 24/7. Paiement s√©curis√©. Garantie 1 an minimum.</p>

            <div class="promo" style="margin-top:12px">
              <div class="badge">Offre flash -20%</div>
              <div id="flashTimer" style="font-weight:700;color:var(--danger)">Chargement du timer...</div>
            </div>

            <div style="margin-top:14px">
              <button class="btn" id="openCatalog">Voir le catalogue</button>
              <button class="btn" id="openBundles">Bundles</button>
            </div>
          </div>

          <aside style="width:340px">
            <div style="background:linear-gradient(180deg,#fff,#f1f7fb);padding:14px;border-radius:12px">
              <h3 style="margin:0">Livraison rapide</h3>
              <p style="margin:6px 0;color:var(--muted)">Livraison 24-48h sur la majorit√© des produits.</p>
              <ul style="margin:0;padding-left:18px;color:var(--muted)">
                <li>Assistance 24/7</li>
                <li>Paiement 100% s√©curis√©</li>
                <li>Garantie 1 an minimum</li>
              </ul>
            </div>
          </aside>
        </div>
      </div>

      <div class="hero-card">
        <h3>Top ventes</h3>
        <div id="topList" style="display:grid;gap:10px;margin-top:10px"></div>
      </div>
    </section>

    <section style="padding:12px 20px">
      <h2 style="margin:8px 0">Nos produits</h2>
      <div class="grid" id="productsGrid">Chargement...</div>
    </section>
  </main>

  <div id="minicart" class="minicart" hidden>
    <h4>Panier</h4>
    <div id="cartItems"></div>
    <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
      <div><strong>Total:</strong> <span id="cartTotal">0 ‚Ç¨</span></div>
      <div>
        <button class="btn" id="goCheckout">Commander</button>
      </div>
    </div>
  </div>

  <footer>
    ¬© GF Store ‚Äî Tous droits r√©serv√©s ‚Ä¢ Paiement s√©curis√© ‚Ä¢ Assistance 24/7
  </footer>

  <script>
    /*********************** Configuration ************************/
    // Chemin vers votre JSON de produits. Par d√©faut, on tente plusieurs emplacements.
    const PRODUCT_PATHS = [
      'produits.json',
      './produits.json',
      'assets/produits.json',
      'C:/Users/Elvis SPH/Desktop/GF_Store/produits.json',
      'file:///C:/Users/Elvis SPH/Desktop/GF_Store/produits.json'
    ];

    // Dur√©e de l'offre flash en heures
    const FLASH_HOURS = 24;

    /*********************** Utilitaires **************************/
    function $(sel){return document.querySelector(sel)}
    function $all(sel){return Array.from(document.querySelectorAll(sel))}

    // Format price
    const fmt = val => (typeof val === 'number' ? val.toFixed(2).replace('.',',') + ' ‚Ç¨' : val);

    /*********************** Theme ********************************/
    const themeToggle = document.getElementById('themeToggle');
    const userTheme = localStorage.getItem('gf_theme') || (window.matchMedia && window.matchMedia('(prefers-color-scheme:dark)').matches ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', userTheme === 'dark' ? 'dark' : 'light');
    themeToggle.addEventListener('click', ()=>{
      const cur = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', cur);
      localStorage.setItem('gf_theme', cur);
    });

    /*********************** Cart *********************************/
    const CART_KEY = 'gf_cart_v1';
    function loadCart(){ try{ return JSON.parse(localStorage.getItem(CART_KEY) || '[]') }catch(e){return []} }
    function saveCart(c){ localStorage.setItem(CART_KEY, JSON.stringify(c)); renderCartCount(); }
    function addToCart(productId, product){ const cart = loadCart(); const item = cart.find(i=>i.id===productId); if(item){ item.qty++; } else { cart.push({id:productId, title:product.name, price:product.price, image:product.image||'', qty:1}); }
      saveCart(cart);
      openMiniCart();
    }
    function renderCartCount(){ const cart = loadCart(); const total = cart.reduce((s,i)=>s+i.qty,0); document.getElementById('cartCount').textContent = total; }
    function renderMiniCart(){ const items = loadCart(); const container = document.getElementById('cartItems'); container.innerHTML=''; if(items.length===0){ container.innerHTML='<div style="color:var(--muted)">Votre panier est vide.</div>'; document.getElementById('cartTotal').textContent = '0 ‚Ç¨'; return; }
      let total = 0;
      items.forEach(it=>{
        total += it.price * it.qty;
        const div = document.createElement('div'); div.className='cart-item'; div.innerHTML = `
          <img src="${it.image || 'https://via.placeholder.com/80?text=GF'}" alt="">
          <div style="flex:1">
            <div style="font-weight:700">${it.title}</div>
            <div style="font-size:0.9rem;color:var(--muted)">${it.qty} x ${fmt(it.price)}</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:6px">
            <button class="info" onclick="window.__gf_changeQty('${it.id}',1)">+</button>
            <button class="info" onclick="window.__gf_changeQty('${it.id}',-1)">-</button>
          </div>
        `;
        container.appendChild(div);
      });
      document.getElementById('cartTotal').textContent = fmt(total);
    }
    window.__gf_changeQty = function(id, delta){ const cart = loadCart(); const idx = cart.findIndex(i=>i.id===id); if(idx===-1) return; cart[idx].qty += delta; if(cart[idx].qty<=0) cart.splice(idx,1); saveCart(cart); renderMiniCart(); }
    function openMiniCart(){ document.getElementById('minicart').hidden=false; renderMiniCart(); }
    document.getElementById('cartBtn').addEventListener('click', ()=>{ openMiniCart(); });
    document.getElementById('goCheckout').addEventListener('click', ()=>{ alert('Page checkout non impl√©ment√©e dans ce fichier.'); });
    renderCartCount();

    /*********************** Fetch produits ************************/
    let PRODUCTS = [];

    async function tryFetch(path){
      try{
        const res = await fetch(path);
        if(!res.ok) throw new Error('not ok');
        const data = await res.json();
        if(Array.isArray(data)) return data;
        // If JSON wrapped in { products: [...] }
        if(Array.isArray(data.products)) return data.products;
        return null;
      }catch(e){ return null }
    }

    async function loadProducts(){
      for(const p of PRODUCT_PATHS){
        const data = await tryFetch(p);
        if(data){ PRODUCTS = data; console.info('Produits charg√©s depuis', p); return; }
      }
      // fallback sample if nothing found
      PRODUCTS = [
        {id:'macbook-pro', name:'MacBook Pro 14"', category:'PC & Informatique', price:2499, oldPrice:2799, stock:5, image:'assets/images/macbook.png', badges:['üî• Offre flash']},
        {id:'ps5', name:'PlayStation 5', category:'Consoles', price:499, stock:3, image:'assets/images/ps5.png', badges:['Stock limit√©']},
        {id:'airpods-pro', name:'AirPods Pro', category:'Audio', price:249, stock:12, image:'assets/images/airpods.png'}
      ];
      console.warn('Aucun produits.json trouv√©. Le site utilise des produits de d√©monstration. Placez votre fichiers produits.json dans le m√™me dossier que index.html.');
    }

    function renderProducts(list){
      const grid = document.getElementById('productsGrid'); grid.innerHTML='';
      list.forEach(p=>{
        const el = document.createElement('article'); el.className='product';
        el.innerHTML = `
          <img src="${p.image || 'https://via.placeholder.com/400x300?text=GF+Store'}" alt="${p.name}">
          <div class="meta"><div class="title">${p.name}</div><div class="price">${fmt(p.price)}${p.oldPrice?'<span class="old">'+fmt(p.oldPrice)+'</span>':''}</div></div>
          <div style="color:var(--muted);font-size:0.9rem">${p.category || ''}</div>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div class="badges">
              ${ (p.badges||[]).map(b=>`<div class="badge-small">${b}</div>`).join('') }
              ${ p.stock<=5 ? '<div class="badge-small">Stock: '+p.stock+'</div>' : '' }
            </div>
          </div>
          <div style="margin-top:auto;display:flex;gap:10px">
            <button class="info" onclick="window.__gf_viewProduct('${p.id}')">Voir</button>
            <button class="add" onclick="window.__gf_addToCart('${p.id}')">Ajouter</button>
          </div>
        `;
        grid.appendChild(el);
      });
    }

    // quick helpers for buttons (exposed globally for inline onclick)
    window.__gf_addToCart = function(id){ const p = PRODUCTS.find(x=>x.id===id); if(!p){ alert('Produit introuvable'); return; } if(p.stock && p.stock<=0){ alert('Produit en rupture'); return; } addToCart(id,p); };
    window.__gf_viewProduct = function(id){ const p = PRODUCTS.find(x=>x.id===id); if(!p){ alert('Produit introuvable'); return; } alert(p.name + "\n\n" + (p.description || 'Aucune description disponible.') ); };

    /*********************** Top ventes et recherche ****************/
    function renderTop(){ const top = PRODUCTS.slice(0,4); const container = document.getElementById('topList'); container.innerHTML=''; top.forEach(t=>{
      const d = document.createElement('div'); d.style.display='flex'; d.style.alignItems='center'; d.style.gap='10px'; d.innerHTML = `<img src="${t.image||'https://via.placeholder.com/80'}" style="width:64px;height:64px;object-fit:contain;border-radius:8px"><div><div style="font-weight:700">${t.name}</div><div style="color:var(--muted)">${fmt(t.price)}</div></div>`;
      container.appendChild(d);
    }); }

    document.getElementById('searchInput').addEventListener('input', (e)=>{
      const q = e.target.value.trim().toLowerCase(); if(!q){ renderProducts(PRODUCTS); return; }
      const filtered = PRODUCTS.filter(p=> (p.name||'').toLowerCase().includes(q) || (p.category||'').toLowerCase().includes(q));
      renderProducts(filtered);
    });

    /*********************** Flash timer **************************/
    function initFlash(){
      const key = 'gf_flash_end';
      let end = localStorage.getItem(key);
      if(!end){ end = Date.now() + FLASH_HOURS*3600*1000; localStorage.setItem(key, end); }
      function tick(){
        const remaining = parseInt(end) - Date.now();
        if(remaining<=0){ document.getElementById('flashTimer').textContent = 'Offre termin√©e'; return; }
        const h = Math.floor(remaining/3600000); const m = Math.floor((remaining%3600000)/60000); const s = Math.floor((remaining%60000)/1000);
        document.getElementById('flashTimer').textContent = `-${20}% ‚Ä¢ ${h}h ${m}m ${s}s`;
      }
      tick(); setInterval(tick,1000);
    }

    /*********************** Boot ********************************/
    (async function(){
      await loadProducts();
      renderProducts(PRODUCTS);
      renderTop();
      initFlash();
    })();

  </script>
</body>
</html>
